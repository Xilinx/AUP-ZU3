// Copyright (C) 2025 Advanced Micro Devices, Inc.
// SPDX-License-Identifier: BSD-3-Clause

/include/ "system-conf.dtsi"
#include <dt-bindings/phy/phy.h>

/ {
	model ="AUP-ZU3 v1.0";
	
	dp_clk:psgtr_dp_clock {
		compatible = "fixed-clock";
		#clock-cells = <0x00>;
		clock-frequency = <27000000>;
	};

	usb_clk:psgtr_usb_clock {
		compatible = "fixed-clock";
		#clock-cells = <0x00>;
		clock-frequency = <100000000>;
	};
	
	leds {
		compatible = "gpio-leds";

		ps_led0 {
			label = "ps_led0";
			gpios = <&gpio 0x11 0x0>;
			linux,default-trigger = "heartbeat";
		};

		ps_led1 {
			label = "ps_led1";
			gpios = <&gpio 0x14 0x0>;
			default-state = "on";
		};
	};

	gpio-keys {
		compatible = "gpio-keys";
		autorepeat;

		ps_sw0 {
			label = "ps_sw0";
			gpios = <&gpio 0x6 0x0>;
			linux,code = <0x74>;
			gpio-key,wakeup;
		};
	};
};

&sdhci0 {
	no-1-8-v;
	disable-wp;
};

&psgtr {
      /* dp 0-1, usb0, usb1 */
      clocks = <&dp_clk>, <&usb_clk>;
      clock-names = "ref0", "ref1";
};

&zynqmp_dpsub {
	status = "okay";
	phys = <&psgtr 1 PHY_TYPE_DP 0 0>, <&psgtr 0 PHY_TYPE_DP 1 0>;
	phy-names = "dp-phy0", "dp-phy1";
};

&usb0 {
	/* USB Gadget*/
	status = "okay";
	phys = <&psgtr 2 PHY_TYPE_USB3 0 1>;
	phy-names = "usb3-phy";
};

&dwc3_0 {
	status = "okay";
	dr_mode = "peripheral";
	label = "USB Gadget";
	maximum-speed = "super-speed";
	snps,usb2-lpm-disable;
	snps,usb3_lpm_capable;
	snps,dis_u2_susphy_quirk;
	snps,dis_u3_susphy_quirk;
};

&usb1 {
	status = "okay";
	phys = <&psgtr 3 PHY_TYPE_USB3 1 1>;
	phy-names = "usb3-phy";
};

&dwc3_1 {
	status = "okay";
	dr_mode = "host";
	label = "USB Hub";
	maximum-speed = "super-speed";
	snps,usb2-lpm-disable;
	snps,usb3_lpm_capable;
	snps,dis_u2_susphy_quirk;
	snps,dis_u3_susphy_quirk;
};


